<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0b5c60" />
    <title>Recipe App</title>
    <link rel="stylesheet" href="style-recipe.css" />
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/x-icon" href="/icons/favicon.ico" />
  </head>
  <body>
    <!-- HEADER / NAV  -->
    <header>
      <div class="header-container">
        <h1>My Recipe Organizer</h1>
        <p>by Petr Raisigl</p>
        <p>for INFO-5146</p>
      </div>
      <ul class="navigation-container">
        <li id="add-recipe-button">Add</li>
        <li>Home</li>
        <li>Favourite</li>
      </ul>
    </header>
    <main>
      <!-- ADD RECIPE MODAL  -->
      <div class="add-modal">
        <div class="add-modal-div">
          <label for="recipe-title" class="recipe-label">
            Recipe Title
            <input
              class="recipe-input"
              name="recipe-title-input"
              type="text"
              id="recipe-title"
            />
          </label>
        </div>
        <div class="add-modal-div">
          <label for="recipe-description" class="recipe-label">
            Recipe Description
            <textarea
              class="recipe-input"
              name="recipe-title-input"
              type="text"
              id="recipe-description"
            ></textarea>
          </label>
        </div>
        <div class="add-modal-div">
          <label for="recipe-tags" class="recipe-label">
            Recipe Tags <span class="normal-text">(separate by a comma)</span>
            <input
              class="recipe-input"
              name="recipe-title-input"
              type="text"
              id="recipe-tags"
            />
          </label>
          <div class="tags-preview"><p></p></div>
        </div>
        <div class="add-modal-div add-modal-flex-end">
          <button class="add-modal-button">Add</button>
        </div>
        <div class="add-modal-div add-modal-flex-end">
          <label for="recipe-input-checkbox" class="recipe-input-checkbox">
            Favourite:
            <input
              type="checkbox"
              name="recipe-input-checkbox"
              id="recipe-input-checkbox"
            />
          </label>
        </div>
      </div>

      <div class="recipe-list"></div>
    </main>
    <script>
      // hide / show modal
      document.addEventListener("DOMContentLoaded", () => {
        const addButton = document.getElementById("add-recipe-button");
        const addModal = document.querySelector(".add-modal");

        addButton.addEventListener("click", () => {
          addModal.style.display =
            addModal.style.display === "none" || addModal.style.display === ""
              ? "flex"
              : "none";
        });
      });
      // test data
      const testList = [
        {
          heading: "Recipe 1",
          description: "This is where the method will be described.",
          steps: ["Boil potatoes", "Make salad"],
          tags: ["potatoes", "mayonaisse"],
          favourite: false,
        },
        {
          heading: "Recipe 2",
          description:
            "This is where the method will be described. You should probably make sure this field can accept long text and format it accordingly.",
          steps: ["Boil potatoes", "Make salad"],
          tags: ["potatoes", "mayonaisse"],
          favourite: true,
        },
      ];
      document.addEventListener("DOMContentLoaded", () => {
        const recipeListDiv = document.querySelector(".recipe-list");

        function renderRecipes(recipes) {
          recipeListDiv.innerHTML = ""; // Clear existing recipes
          recipes.forEach((recipe) => {
            const recipeCard = document.createElement("div");
            recipeCard.classList.add("recipe-card");

            recipeCard.innerHTML = `
        <h2>${recipe.heading}</h2>
        <p>${recipe.description}</p>
        <h4>Steps:</h4>
        <ol>
          ${recipe.steps
            .map((step, index) => `<li>${index + 1}. ${step}</li>`)
            .join("")}
        </ol>
        <p><strong>Tags:</strong> ${recipe.tags.join(", ")}</p>
        <p><strong>Favourite:</strong> ${recipe.favourite ? "❤️" : "❌"}</p>
      `;

            recipeListDiv.appendChild(recipeCard);
          });
        }

        renderRecipes(testList); // Render test data on page load
      });
    </script>
  </body>
</html>
